<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>Source code</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="source: module: org.tquadrat.foundation.util, package: org.tquadrat.foundation.util, class: SystemUtils">
<meta name="generator" content="javadoc/SourceToHTMLConverter">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body class="source-page">
<main role="main">
<div class="source-container">
<pre><span class="source-line-no">001</span><span id="line-1">/*</span>
<span class="source-line-no">002</span><span id="line-2"> * ============================================================================</span>
<span class="source-line-no">003</span><span id="line-3"> * Copyright Â© 2002-2021 by Thomas Thrien.</span>
<span class="source-line-no">004</span><span id="line-4"> * All Rights Reserved.</span>
<span class="source-line-no">005</span><span id="line-5"> * ============================================================================</span>
<span class="source-line-no">006</span><span id="line-6"> * Licensed to the public under the agreements of the GNU Lesser General Public</span>
<span class="source-line-no">007</span><span id="line-7"> * License, version 3.0 (the "License"). You may obtain a copy of the License at</span>
<span class="source-line-no">008</span><span id="line-8"> *</span>
<span class="source-line-no">009</span><span id="line-9"> *      http://www.gnu.org/licenses/lgpl.html</span>
<span class="source-line-no">010</span><span id="line-10"> *</span>
<span class="source-line-no">011</span><span id="line-11"> * Unless required by applicable law or agreed to in writing, software</span>
<span class="source-line-no">012</span><span id="line-12"> * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT</span>
<span class="source-line-no">013</span><span id="line-13"> * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the</span>
<span class="source-line-no">014</span><span id="line-14"> * License for the specific language governing permissions and limitations</span>
<span class="source-line-no">015</span><span id="line-15"> * under the License.</span>
<span class="source-line-no">016</span><span id="line-16"> */</span>
<span class="source-line-no">017</span><span id="line-17"></span>
<span class="source-line-no">018</span><span id="line-18">package org.tquadrat.foundation.util;</span>
<span class="source-line-no">019</span><span id="line-19"></span>
<span class="source-line-no">020</span><span id="line-20">import static java.lang.Math.max;</span>
<span class="source-line-no">021</span><span id="line-21">import static java.lang.System.arraycopy;</span>
<span class="source-line-no">022</span><span id="line-22">import static java.lang.System.currentTimeMillis;</span>
<span class="source-line-no">023</span><span id="line-23">import static java.lang.System.getProperties;</span>
<span class="source-line-no">024</span><span id="line-24">import static java.lang.System.getProperty;</span>
<span class="source-line-no">025</span><span id="line-25">import static java.lang.System.nanoTime;</span>
<span class="source-line-no">026</span><span id="line-26">import static java.lang.Thread.currentThread;</span>
<span class="source-line-no">027</span><span id="line-27">import static java.net.InetAddress.getByName;</span>
<span class="source-line-no">028</span><span id="line-28">import static java.util.Arrays.stream;</span>
<span class="source-line-no">029</span><span id="line-29">import static java.util.Collections.list;</span>
<span class="source-line-no">030</span><span id="line-30">import static java.util.Locale.ROOT;</span>
<span class="source-line-no">031</span><span id="line-31">import static java.util.function.Function.identity;</span>
<span class="source-line-no">032</span><span id="line-32">import static java.util.stream.Collectors.toMap;</span>
<span class="source-line-no">033</span><span id="line-33">import static org.apiguardian.api.API.Status.DEPRECATED;</span>
<span class="source-line-no">034</span><span id="line-34">import static org.apiguardian.api.API.Status.EXPERIMENTAL;</span>
<span class="source-line-no">035</span><span id="line-35">import static org.apiguardian.api.API.Status.STABLE;</span>
<span class="source-line-no">036</span><span id="line-36">import static org.tquadrat.foundation.lang.CommonConstants.PROPERTY_CPUARCHITECTURE;</span>
<span class="source-line-no">037</span><span id="line-37">import static org.tquadrat.foundation.lang.CommonConstants.PROPERTY_OSNAME;</span>
<span class="source-line-no">038</span><span id="line-38">import static org.tquadrat.foundation.lang.CommonConstants.PROPERTY_OSVERSION;</span>
<span class="source-line-no">039</span><span id="line-39">import static org.tquadrat.foundation.lang.CommonConstants.TIME_DELTA_BEGINGREGORIAN2BEGINEPOCH;</span>
<span class="source-line-no">040</span><span id="line-40">import static org.tquadrat.foundation.lang.Objects.isNull;</span>
<span class="source-line-no">041</span><span id="line-41">import static org.tquadrat.foundation.lang.Objects.nonNull;</span>
<span class="source-line-no">042</span><span id="line-42">import static org.tquadrat.foundation.lang.Objects.requireNonNullArgument;</span>
<span class="source-line-no">043</span><span id="line-43">import static org.tquadrat.foundation.lang.Objects.requireNotEmptyArgument;</span>
<span class="source-line-no">044</span><span id="line-44">import static org.tquadrat.foundation.util.StringUtils.format;</span>
<span class="source-line-no">045</span><span id="line-45">import static org.tquadrat.foundation.util.StringUtils.splitString;</span>
<span class="source-line-no">046</span><span id="line-46"></span>
<span class="source-line-no">047</span><span id="line-47">import java.io.File;</span>
<span class="source-line-no">048</span><span id="line-48">import java.math.BigInteger;</span>
<span class="source-line-no">049</span><span id="line-49">import java.net.Inet4Address;</span>
<span class="source-line-no">050</span><span id="line-50">import java.net.InetAddress;</span>
<span class="source-line-no">051</span><span id="line-51">import java.net.NetworkInterface;</span>
<span class="source-line-no">052</span><span id="line-52">import java.net.SocketException;</span>
<span class="source-line-no">053</span><span id="line-53">import java.net.UnknownHostException;</span>
<span class="source-line-no">054</span><span id="line-54">import java.time.Duration;</span>
<span class="source-line-no">055</span><span id="line-55">import java.time.Instant;</span>
<span class="source-line-no">056</span><span id="line-56">import java.time.ZoneId;</span>
<span class="source-line-no">057</span><span id="line-57">import java.util.Collection;</span>
<span class="source-line-no">058</span><span id="line-58">import java.util.HashMap;</span>
<span class="source-line-no">059</span><span id="line-59">import java.util.HexFormat;</span>
<span class="source-line-no">060</span><span id="line-60">import java.util.IllformedLocaleException;</span>
<span class="source-line-no">061</span><span id="line-61">import java.util.List;</span>
<span class="source-line-no">062</span><span id="line-62">import java.util.Locale;</span>
<span class="source-line-no">063</span><span id="line-63">import java.util.Map;</span>
<span class="source-line-no">064</span><span id="line-64">import java.util.Optional;</span>
<span class="source-line-no">065</span><span id="line-65">import java.util.Random;</span>
<span class="source-line-no">066</span><span id="line-66">import java.util.TimeZone;</span>
<span class="source-line-no">067</span><span id="line-67">import java.util.regex.Pattern;</span>
<span class="source-line-no">068</span><span id="line-68">import java.util.regex.PatternSyntaxException;</span>
<span class="source-line-no">069</span><span id="line-69"></span>
<span class="source-line-no">070</span><span id="line-70">import org.apiguardian.api.API;</span>
<span class="source-line-no">071</span><span id="line-71">import org.tquadrat.foundation.annotation.ClassVersion;</span>
<span class="source-line-no">072</span><span id="line-72">import org.tquadrat.foundation.annotation.UtilityClass;</span>
<span class="source-line-no">073</span><span id="line-73">import org.tquadrat.foundation.exception.PrivateConstructorForStaticClassCalledError;</span>
<span class="source-line-no">074</span><span id="line-74">import org.tquadrat.foundation.exception.ValidationException;</span>
<span class="source-line-no">075</span><span id="line-75">import org.tquadrat.foundation.lang.Lazy;</span>
<span class="source-line-no">076</span><span id="line-76">import org.tquadrat.foundation.lang.SoftLazy;</span>
<span class="source-line-no">077</span><span id="line-77"></span>
<span class="source-line-no">078</span><span id="line-78">/**</span>
<span class="source-line-no">079</span><span id="line-79"> *  This class provides some system related helper and convenience</span>
<span class="source-line-no">080</span><span id="line-80"> *  methods.</span>
<span class="source-line-no">081</span><span id="line-81"> *</span>
<span class="source-line-no">082</span><span id="line-82"> *  @extauthor Thomas Thrien - thomas.thrien@tquadrat.org</span>
<span class="source-line-no">083</span><span id="line-83"> *  @version $Id: SystemUtils.java 1021 2022-03-01 22:53:02Z tquadrat $</span>
<span class="source-line-no">084</span><span id="line-84"> *  @since 0.0.5</span>
<span class="source-line-no">085</span><span id="line-85"> *</span>
<span class="source-line-no">086</span><span id="line-86"> *  @UMLGraph.link</span>
<span class="source-line-no">087</span><span id="line-87"> */</span>
<span class="source-line-no">088</span><span id="line-88">@SuppressWarnings( {"ClassWithTooManyMethods", "OverlyComplexClass"} )</span>
<span class="source-line-no">089</span><span id="line-89">@ClassVersion( sourceVersion = "$Id: SystemUtils.java 1021 2022-03-01 22:53:02Z tquadrat $" )</span>
<span class="source-line-no">090</span><span id="line-90">@API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">091</span><span id="line-91">@UtilityClass</span>
<span class="source-line-no">092</span><span id="line-92">public final class SystemUtils</span>
<span class="source-line-no">093</span><span id="line-93">{</span>
<span class="source-line-no">094</span><span id="line-94">        /*---------------*\</span>
<span class="source-line-no">095</span><span id="line-95">    ====** Inner Classes **====================================================</span>
<span class="source-line-no">096</span><span id="line-96">        \*---------------*/</span>
<span class="source-line-no">097</span><span id="line-97">    /**</span>
<span class="source-line-no">098</span><span id="line-98">     *  The operating system families that are supported (or not) by Java.&lt;br&gt;</span>
<span class="source-line-no">099</span><span id="line-99">     *  &lt;br&gt;Currently, we can distinguish only between Microsoft Windows,</span>
<span class="source-line-no">100</span><span id="line-100">     *  UNIX/Linux and MacOX/OS-X.</span>
<span class="source-line-no">101</span><span id="line-101">     *</span>
<span class="source-line-no">102</span><span id="line-102">     *  @extauthor Thomas Thrien - thomas.thrien@tquadrat.org</span>
<span class="source-line-no">103</span><span id="line-103">     *  @version $Id: SystemUtils.java 1021 2022-03-01 22:53:02Z tquadrat $</span>
<span class="source-line-no">104</span><span id="line-104">     *  @since 0.0.6</span>
<span class="source-line-no">105</span><span id="line-105">     *</span>
<span class="source-line-no">106</span><span id="line-106">     *  @UMLGraph.link</span>
<span class="source-line-no">107</span><span id="line-107">     *</span>
<span class="source-line-no">108</span><span id="line-108">     *  @see SystemUtils#determineOperatingSystem()</span>
<span class="source-line-no">109</span><span id="line-109">     */</span>
<span class="source-line-no">110</span><span id="line-110">    @ClassVersion( sourceVersion = "$Id: SystemUtils.java 1021 2022-03-01 22:53:02Z tquadrat $" )</span>
<span class="source-line-no">111</span><span id="line-111">    @API( status = STABLE, since = "0.0.6" )</span>
<span class="source-line-no">112</span><span id="line-112">    public static enum OperatingSystem</span>
<span class="source-line-no">113</span><span id="line-113">    {</span>
<span class="source-line-no">114</span><span id="line-114">            /*------------------*\</span>
<span class="source-line-no">115</span><span id="line-115">        ====** Enum Declaration **=============================================</span>
<span class="source-line-no">116</span><span id="line-116">            \*------------------*/</span>
<span class="source-line-no">117</span><span id="line-117">        /**</span>
<span class="source-line-no">118</span><span id="line-118">         *  The operating system is OS-X</span>
<span class="source-line-no">119</span><span id="line-119">         */</span>
<span class="source-line-no">120</span><span id="line-120">        OSX,</span>
<span class="source-line-no">121</span><span id="line-121"></span>
<span class="source-line-no">122</span><span id="line-122">        /**</span>
<span class="source-line-no">123</span><span id="line-123">         *  The operating system is UNIX/Linux.</span>
<span class="source-line-no">124</span><span id="line-124">         */</span>
<span class="source-line-no">125</span><span id="line-125">        UNIX,</span>
<span class="source-line-no">126</span><span id="line-126"></span>
<span class="source-line-no">127</span><span id="line-127">        /**</span>
<span class="source-line-no">128</span><span id="line-128">         *  The operating system is Microsoft Windows.</span>
<span class="source-line-no">129</span><span id="line-129">         */</span>
<span class="source-line-no">130</span><span id="line-130">        WINDOWS,</span>
<span class="source-line-no">131</span><span id="line-131"></span>
<span class="source-line-no">132</span><span id="line-132">        /**</span>
<span class="source-line-no">133</span><span id="line-133">         *  The current operating system is unknown to this library.</span>
<span class="source-line-no">134</span><span id="line-134">         */</span>
<span class="source-line-no">135</span><span id="line-135">        UNKNOWN;</span>
<span class="source-line-no">136</span><span id="line-136"></span>
<span class="source-line-no">137</span><span id="line-137">            /*---------*\</span>
<span class="source-line-no">138</span><span id="line-138">        ====** Methods **======================================================</span>
<span class="source-line-no">139</span><span id="line-139">            \*---------*/</span>
<span class="source-line-no">140</span><span id="line-140">        /**</span>
<span class="source-line-no">141</span><span id="line-141">         *  Returns the operating system architecture.</span>
<span class="source-line-no">142</span><span id="line-142">         *</span>
<span class="source-line-no">143</span><span id="line-143">         *  @return The architecture.</span>
<span class="source-line-no">144</span><span id="line-144">         */</span>
<span class="source-line-no">145</span><span id="line-145">        @SuppressWarnings( "static-method" )</span>
<span class="source-line-no">146</span><span id="line-146">        public final String getArchitecture() {return getProperty( PROPERTY_CPUARCHITECTURE ); }</span>
<span class="source-line-no">147</span><span id="line-147"></span>
<span class="source-line-no">148</span><span id="line-148">        /**</span>
<span class="source-line-no">149</span><span id="line-149">         *  Returns the name of the operating system.</span>
<span class="source-line-no">150</span><span id="line-150">         *</span>
<span class="source-line-no">151</span><span id="line-151">         *  @return The operating system name.</span>
<span class="source-line-no">152</span><span id="line-152">         */</span>
<span class="source-line-no">153</span><span id="line-153">        @SuppressWarnings( "static-method" )</span>
<span class="source-line-no">154</span><span id="line-154">        public final String getName() { return getProperty( PROPERTY_OSNAME ); }</span>
<span class="source-line-no">155</span><span id="line-155"></span>
<span class="source-line-no">156</span><span id="line-156">        /**</span>
<span class="source-line-no">157</span><span id="line-157">         *  Returns the name of the operating system.</span>
<span class="source-line-no">158</span><span id="line-158">         *</span>
<span class="source-line-no">159</span><span id="line-159">         *  @return The operating system name.</span>
<span class="source-line-no">160</span><span id="line-160">         */</span>
<span class="source-line-no">161</span><span id="line-161">        public final String getNameVersion() { return format( "%s %s (%s)", getName(), getVersion(), getArchitecture() ); }</span>
<span class="source-line-no">162</span><span id="line-162"></span>
<span class="source-line-no">163</span><span id="line-163">        /**</span>
<span class="source-line-no">164</span><span id="line-164">         *  Returns the version of the operating system.</span>
<span class="source-line-no">165</span><span id="line-165">         *</span>
<span class="source-line-no">166</span><span id="line-166">         *  @return The version of the operating system.</span>
<span class="source-line-no">167</span><span id="line-167">         */</span>
<span class="source-line-no">168</span><span id="line-168">        @SuppressWarnings( "static-method" )</span>
<span class="source-line-no">169</span><span id="line-169">        public final String getVersion() { return getProperty( PROPERTY_OSVERSION ); }</span>
<span class="source-line-no">170</span><span id="line-170">    }</span>
<span class="source-line-no">171</span><span id="line-171">    //  enum OperatingSystem</span>
<span class="source-line-no">172</span><span id="line-172"></span>
<span class="source-line-no">173</span><span id="line-173">        /*-----------*\</span>
<span class="source-line-no">174</span><span id="line-174">    ====** Constants **========================================================</span>
<span class="source-line-no">175</span><span id="line-175">        \*-----------*/</span>
<span class="source-line-no">176</span><span id="line-176">    /**</span>
<span class="source-line-no">177</span><span id="line-177">     *  The length of a String containing a MAC address: {@value}.</span>
<span class="source-line-no">178</span><span id="line-178">     */</span>
<span class="source-line-no">179</span><span id="line-179">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">180</span><span id="line-180">    public static final int MAC_ADDRESS_Size = 17;</span>
<span class="source-line-no">181</span><span id="line-181"></span>
<span class="source-line-no">182</span><span id="line-182">    /**</span>
<span class="source-line-no">183</span><span id="line-183">     *  The regular expression for a valid IPv4 address: {@value}.</span>
<span class="source-line-no">184</span><span id="line-184">     */</span>
<span class="source-line-no">185</span><span id="line-185">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">186</span><span id="line-186">    public static final String PATTERN_IPv4_ADDRESS = "^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$";</span>
<span class="source-line-no">187</span><span id="line-187"></span>
<span class="source-line-no">188</span><span id="line-188">        /*------------*\</span>
<span class="source-line-no">189</span><span id="line-189">    ====** Attributes **=======================================================</span>
<span class="source-line-no">190</span><span id="line-190">        \*------------*/</span>
<span class="source-line-no">191</span><span id="line-191">    /**</span>
<span class="source-line-no">192</span><span id="line-192">     *  The location or node id.</span>
<span class="source-line-no">193</span><span id="line-193">     */</span>
<span class="source-line-no">194</span><span id="line-194">    private static Long m_Node = null;</span>
<span class="source-line-no">195</span><span id="line-195"></span>
<span class="source-line-no">196</span><span id="line-196">        /*------------------------*\</span>
<span class="source-line-no">197</span><span id="line-197">    ====** Static Initialisations **===========================================</span>
<span class="source-line-no">198</span><span id="line-198">        \*------------------------*/</span>
<span class="source-line-no">199</span><span id="line-199">    /**</span>
<span class="source-line-no">200</span><span id="line-200">     *  The adjustment for the values that are returned from</span>
<span class="source-line-no">201</span><span id="line-201">     *  {@link System#nanoTime()}.</span>
<span class="source-line-no">202</span><span id="line-202">     */</span>
<span class="source-line-no">203</span><span id="line-203">    private static final BigInteger m_NanoAdjust;</span>
<span class="source-line-no">204</span><span id="line-204"></span>
<span class="source-line-no">205</span><span id="line-205">    /**</span>
<span class="source-line-no">206</span><span id="line-206">     *  The operating system.</span>
<span class="source-line-no">207</span><span id="line-207">     */</span>
<span class="source-line-no">208</span><span id="line-208">    private static final Lazy&lt;OperatingSystem&gt; m_OperatingSystem;</span>
<span class="source-line-no">209</span><span id="line-209"></span>
<span class="source-line-no">210</span><span id="line-210">    /**</span>
<span class="source-line-no">211</span><span id="line-211">     *  The pattern to check a string for an IPv4 address.</span>
<span class="source-line-no">212</span><span id="line-212">     */</span>
<span class="source-line-no">213</span><span id="line-213">    private static final Lazy&lt;Pattern&gt; m_PatternIPv4Address;</span>
<span class="source-line-no">214</span><span id="line-214">    /**</span>
<span class="source-line-no">215</span><span id="line-215">     *  The random number generator.</span>
<span class="source-line-no">216</span><span id="line-216">     */</span>
<span class="source-line-no">217</span><span id="line-217">    private static final Lazy&lt;Random&gt; m_Random;</span>
<span class="source-line-no">218</span><span id="line-218"></span>
<span class="source-line-no">219</span><span id="line-219">    /**</span>
<span class="source-line-no">220</span><span id="line-220">     *  The alias map.</span>
<span class="source-line-no">221</span><span id="line-221">     *</span>
<span class="source-line-no">222</span><span id="line-222">     *  @see #createZoneIdAliasMap()</span>
<span class="source-line-no">223</span><span id="line-223">     */</span>
<span class="source-line-no">224</span><span id="line-224">    private static final SoftLazy&lt;Map&lt;String,String&gt;&gt; m_ZoneIdAliasMap;</span>
<span class="source-line-no">225</span><span id="line-225"></span>
<span class="source-line-no">226</span><span id="line-226">    static</span>
<span class="source-line-no">227</span><span id="line-227">    {</span>
<span class="source-line-no">228</span><span id="line-228">        //---* The operating system *------------------------------------------</span>
<span class="source-line-no">229</span><span id="line-229">        m_OperatingSystem = Lazy.use( SystemUtils::determineOperatingSystem );</span>
<span class="source-line-no">230</span><span id="line-230"></span>
<span class="source-line-no">231</span><span id="line-231">        //---* The pattern for the IP addresses *------------------------------</span>
<span class="source-line-no">232</span><span id="line-232">        m_PatternIPv4Address = Lazy.use( () -&gt;</span>
<span class="source-line-no">233</span><span id="line-233">        {</span>
<span class="source-line-no">234</span><span id="line-234">            try</span>
<span class="source-line-no">235</span><span id="line-235">            {</span>
<span class="source-line-no">236</span><span id="line-236">                return Pattern.compile( PATTERN_IPv4_ADDRESS );</span>
<span class="source-line-no">237</span><span id="line-237">            }</span>
<span class="source-line-no">238</span><span id="line-238">            catch( final PatternSyntaxException e )</span>
<span class="source-line-no">239</span><span id="line-239">            {</span>
<span class="source-line-no">240</span><span id="line-240">                throw new ExceptionInInitializerError( e );</span>
<span class="source-line-no">241</span><span id="line-241">            }</span>
<span class="source-line-no">242</span><span id="line-242">        } );</span>
<span class="source-line-no">243</span><span id="line-243"></span>
<span class="source-line-no">244</span><span id="line-244">        //---* The random number generator *-----------------------------------</span>
<span class="source-line-no">245</span><span id="line-245">        m_Random = Lazy.use( Random::new );</span>
<span class="source-line-no">246</span><span id="line-246"></span>
<span class="source-line-no">247</span><span id="line-247">        //---* The time adjustment *-------------------------------------------</span>
<span class="source-line-no">248</span><span id="line-248">        final var thousand = BigInteger.valueOf( 1000 );</span>
<span class="source-line-no">249</span><span id="line-249">        final var timeDelta = BigInteger.valueOf( TIME_DELTA_BEGINGREGORIAN2BEGINEPOCH ).multiply( thousand ).multiply( thousand );</span>
<span class="source-line-no">250</span><span id="line-250">        final var nanoNow = BigInteger.valueOf( nanoTime() );</span>
<span class="source-line-no">251</span><span id="line-251">        final var milliNow = BigInteger.valueOf( currentTimeMillis() ).multiply( thousand );</span>
<span class="source-line-no">252</span><span id="line-252">        m_NanoAdjust = milliNow.subtract( nanoNow ).add( timeDelta );</span>
<span class="source-line-no">253</span><span id="line-253"></span>
<span class="source-line-no">254</span><span id="line-254">        //---* Initialise the ZoneId Alias Map *-------------------------------</span>
<span class="source-line-no">255</span><span id="line-255">        m_ZoneIdAliasMap = SoftLazy.use( SystemUtils::createZoneIdAliasMap );</span>
<span class="source-line-no">256</span><span id="line-256">    }</span>
<span class="source-line-no">257</span><span id="line-257"></span>
<span class="source-line-no">258</span><span id="line-258">        /*--------------*\</span>
<span class="source-line-no">259</span><span id="line-259">    ====** Constructors **=====================================================</span>
<span class="source-line-no">260</span><span id="line-260">        \*--------------*/</span>
<span class="source-line-no">261</span><span id="line-261">    /**</span>
<span class="source-line-no">262</span><span id="line-262">     *  No instance allowed for this class.</span>
<span class="source-line-no">263</span><span id="line-263">     */</span>
<span class="source-line-no">264</span><span id="line-264">    private SystemUtils() { throw new PrivateConstructorForStaticClassCalledError( SystemUtils.class ); }</span>
<span class="source-line-no">265</span><span id="line-265"></span>
<span class="source-line-no">266</span><span id="line-266">        /*---------*\</span>
<span class="source-line-no">267</span><span id="line-267">    ====** Methods **==========================================================</span>
<span class="source-line-no">268</span><span id="line-268">        \*---------*/</span>
<span class="source-line-no">269</span><span id="line-269">    /**</span>
<span class="source-line-no">270</span><span id="line-270">     *  Converts an IP address that is given as a string into an</span>
<span class="source-line-no">271</span><span id="line-271">     *  {@link InetAddress}</span>
<span class="source-line-no">272</span><span id="line-272">     *  object.</span>
<span class="source-line-no">273</span><span id="line-273">     *</span>
<span class="source-line-no">274</span><span id="line-274">     *  TODO Currently this method do not process IPv6 addresses properly.</span>
<span class="source-line-no">275</span><span id="line-275">     *</span>
<span class="source-line-no">276</span><span id="line-276">     *  @param  ipAddress   The string with the IP address.</span>
<span class="source-line-no">277</span><span id="line-277">     *  @return The {@code InetAddress} object.</span>
<span class="source-line-no">278</span><span id="line-278">     *  @throws IllegalArgumentException    The given parameter is not a valid</span>
<span class="source-line-no">279</span><span id="line-279">     *      IP address.</span>
<span class="source-line-no">280</span><span id="line-280">     */</span>
<span class="source-line-no">281</span><span id="line-281">    @API( status = EXPERIMENTAL, since = "0.0.5" )</span>
<span class="source-line-no">282</span><span id="line-282">    public static final InetAddress convertIPAddress( final CharSequence ipAddress )</span>
<span class="source-line-no">283</span><span id="line-283">    {</span>
<span class="source-line-no">284</span><span id="line-284">        final var message = "IP address is invalid: %1$s";</span>
<span class="source-line-no">285</span><span id="line-285">        InetAddress retValue = null;</span>
<span class="source-line-no">286</span><span id="line-286"></span>
<span class="source-line-no">287</span><span id="line-287">        final var arg = requireNotEmptyArgument( ipAddress, "ipAddress" ).toString();</span>
<span class="source-line-no">288</span><span id="line-288">        if( m_PatternIPv4Address.get().matcher( arg ).matches() || arg.contains( ":" ) )</span>
<span class="source-line-no">289</span><span id="line-289">        {</span>
<span class="source-line-no">290</span><span id="line-290">            try</span>
<span class="source-line-no">291</span><span id="line-291">            {</span>
<span class="source-line-no">292</span><span id="line-292">                retValue = getByName( arg );</span>
<span class="source-line-no">293</span><span id="line-293">            }</span>
<span class="source-line-no">294</span><span id="line-294">            catch( final UnknownHostException e )</span>
<span class="source-line-no">295</span><span id="line-295">            {</span>
<span class="source-line-no">296</span><span id="line-296">                throw new IllegalArgumentException( format( message, arg ), e );</span>
<span class="source-line-no">297</span><span id="line-297">            }</span>
<span class="source-line-no">298</span><span id="line-298">        }</span>
<span class="source-line-no">299</span><span id="line-299">        else</span>
<span class="source-line-no">300</span><span id="line-300">        {</span>
<span class="source-line-no">301</span><span id="line-301">            throw new IllegalArgumentException( format( message, arg ) );</span>
<span class="source-line-no">302</span><span id="line-302">        }</span>
<span class="source-line-no">303</span><span id="line-303"></span>
<span class="source-line-no">304</span><span id="line-304">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">305</span><span id="line-305">        return retValue;</span>
<span class="source-line-no">306</span><span id="line-306">    }   //  convertIPAddress()</span>
<span class="source-line-no">307</span><span id="line-307"></span>
<span class="source-line-no">308</span><span id="line-308">    /**</span>
<span class="source-line-no">309</span><span id="line-309">     *  Returns a pseudo node id; this is useful in cases a machine does not</span>
<span class="source-line-no">310</span><span id="line-310">     *  have a network card (NIC) so that a MAC address could not be obtained,</span>
<span class="source-line-no">311</span><span id="line-311">     *  or if the real node id should not be used.&lt;br&gt;</span>
<span class="source-line-no">312</span><span id="line-312">     *  &lt;br&gt;Each call to this method will return a new value.</span>
<span class="source-line-no">313</span><span id="line-313">     *</span>
<span class="source-line-no">314</span><span id="line-314">     *  @return The node id.</span>
<span class="source-line-no">315</span><span id="line-315">     */</span>
<span class="source-line-no">316</span><span id="line-316">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">317</span><span id="line-317">    public static final long createPseudoNodeId()</span>
<span class="source-line-no">318</span><span id="line-318">    {</span>
<span class="source-line-no">319</span><span id="line-319">        final var retValue = (getRandom().nextLong() &amp; 0x0000FFFFFFFFFFFFL) | 0x0000010000000000L;</span>
<span class="source-line-no">320</span><span id="line-320"></span>
<span class="source-line-no">321</span><span id="line-321">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">322</span><span id="line-322">        return retValue;</span>
<span class="source-line-no">323</span><span id="line-323">    }   //  createPseudoNodeId()</span>
<span class="source-line-no">324</span><span id="line-324"></span>
<span class="source-line-no">325</span><span id="line-325">    /**</span>
<span class="source-line-no">326</span><span id="line-326">     *  Creates the alias map for the old (deprecated) zone ids that is used</span>
<span class="source-line-no">327</span><span id="line-327">     *  for the call to</span>
<span class="source-line-no">328</span><span id="line-328">     *  {@link ZoneId#of(String, java.util.Map)}</span>
<span class="source-line-no">329</span><span id="line-329">     *  to retrieve a</span>
<span class="source-line-no">330</span><span id="line-330">     *  {@link ZoneId}</span>
<span class="source-line-no">331</span><span id="line-331">     *  instance for the given zone id.</span>
<span class="source-line-no">332</span><span id="line-332">     *</span>
<span class="source-line-no">333</span><span id="line-333">     *  @return The alias map.</span>
<span class="source-line-no">334</span><span id="line-334">     *</span>
<span class="source-line-no">335</span><span id="line-335">     *  @since 0.0.6</span>
<span class="source-line-no">336</span><span id="line-336">     */</span>
<span class="source-line-no">337</span><span id="line-337">    @API( status = STABLE, since = "0.0.6" )</span>
<span class="source-line-no">338</span><span id="line-338">    public static final Map&lt;String,String&gt; createZoneIdAliasMap()</span>
<span class="source-line-no">339</span><span id="line-339">    {</span>
<span class="source-line-no">340</span><span id="line-340">        final var retValue = stream( TimeZone.getAvailableIDs() )</span>
<span class="source-line-no">341</span><span id="line-341">            .filter( id -&gt; !ZoneId.getAvailableZoneIds().contains( id ) )</span>
<span class="source-line-no">342</span><span id="line-342">            .collect( toMap( identity(), id -&gt; TimeZone.getTimeZone( id ).toZoneId().normalized().toString() ) );</span>
<span class="source-line-no">343</span><span id="line-343"></span>
<span class="source-line-no">344</span><span id="line-344">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">345</span><span id="line-345">        return retValue;</span>
<span class="source-line-no">346</span><span id="line-346">    }   //  createZoneIdAliasMap()</span>
<span class="source-line-no">347</span><span id="line-347"></span>
<span class="source-line-no">348</span><span id="line-348">    /**</span>
<span class="source-line-no">349</span><span id="line-349">     *  Returns the current time as nanoseconds since the beginning of the</span>
<span class="source-line-no">350</span><span id="line-350">     *  Gregorian calendar (1582-10-15T00:00).</span>
<span class="source-line-no">351</span><span id="line-351">     *</span>
<span class="source-line-no">352</span><span id="line-352">     *  @return The current time in nanoseconds.</span>
<span class="source-line-no">353</span><span id="line-353">     */</span>
<span class="source-line-no">354</span><span id="line-354">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">355</span><span id="line-355">    public static final BigInteger currentTimeNanos()</span>
<span class="source-line-no">356</span><span id="line-356">    {</span>
<span class="source-line-no">357</span><span id="line-357">        final var retValue = m_NanoAdjust.add( BigInteger.valueOf( nanoTime() ) );</span>
<span class="source-line-no">358</span><span id="line-358"></span>
<span class="source-line-no">359</span><span id="line-359">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">360</span><span id="line-360">        return retValue;</span>
<span class="source-line-no">361</span><span id="line-361">    }   //  currentTimeNanos()</span>
<span class="source-line-no">362</span><span id="line-362"></span>
<span class="source-line-no">363</span><span id="line-363">    /**</span>
<span class="source-line-no">364</span><span id="line-364">     *  Determines an IP address of the machine this program is running on.</span>
<span class="source-line-no">365</span><span id="line-365">     *  Usually this will be one of the addresses that is visible to the</span>
<span class="source-line-no">366</span><span id="line-366">     *  outside. In addition, the method has a clear precedence for IPv4</span>
<span class="source-line-no">367</span><span id="line-367">     *  addresses over IPv6 ones.</span>
<span class="source-line-no">368</span><span id="line-368">     *</span>
<span class="source-line-no">369</span><span id="line-369">     *  @return An instance of</span>
<span class="source-line-no">370</span><span id="line-370">     *      {@link Optional}</span>
<span class="source-line-no">371</span><span id="line-371">     *      that holds the IP address; it will be empty if really no network</span>
<span class="source-line-no">372</span><span id="line-372">     *      adapter is active on this machine.</span>
<span class="source-line-no">373</span><span id="line-373">     *  @throws SocketException Problems to retrieve the internet address.</span>
<span class="source-line-no">374</span><span id="line-374">     */</span>
<span class="source-line-no">375</span><span id="line-375">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">376</span><span id="line-376">    public static final Optional&lt;InetAddress&gt; determineIPAddress() throws SocketException</span>
<span class="source-line-no">377</span><span id="line-377">    {</span>
<span class="source-line-no">378</span><span id="line-378">        Optional&lt;InetAddress&gt; retValue = Optional.empty();</span>
<span class="source-line-no">379</span><span id="line-379"></span>
<span class="source-line-no">380</span><span id="line-380">        List&lt;InetAddress&gt; addresses;</span>
<span class="source-line-no">381</span><span id="line-381">        ScanLoop: for( final var i : getNetworkInterfaces() )</span>
<span class="source-line-no">382</span><span id="line-382">        {</span>
<span class="source-line-no">383</span><span id="line-383">            /*</span>
<span class="source-line-no">384</span><span id="line-384">             * Due to the nature of the scan logic, the returned address will</span>
<span class="source-line-no">385</span><span id="line-385">             * always be that of the last NIC in sequence that is not the</span>
<span class="source-line-no">386</span><span id="line-386">             * loopback interface.</span>
<span class="source-line-no">387</span><span id="line-387">             */</span>
<span class="source-line-no">388</span><span id="line-388">            if( i.isUp() )</span>
<span class="source-line-no">389</span><span id="line-389">            {</span>
<span class="source-line-no">390</span><span id="line-390">                addresses = list( i.getInetAddresses() );</span>
<span class="source-line-no">391</span><span id="line-391">                AddressLoop: for( final var address : addresses )</span>
<span class="source-line-no">392</span><span id="line-392">                {</span>
<span class="source-line-no">393</span><span id="line-393">                    /*</span>
<span class="source-line-no">394</span><span id="line-394">                     * The AddressLoop terminates early, when the first IPv4</span>
<span class="source-line-no">395</span><span id="line-395">                     * address for the NIC was found.</span>
<span class="source-line-no">396</span><span id="line-396">                     */</span>
<span class="source-line-no">397</span><span id="line-397">                    if( i.isLoopback() )</span>
<span class="source-line-no">398</span><span id="line-398">                    {</span>
<span class="source-line-no">399</span><span id="line-399">                        /*</span>
<span class="source-line-no">400</span><span id="line-400">                         * We take {@code loopback} if we do not get</span>
<span class="source-line-no">401</span><span id="line-401">                         * something better ...</span>
<span class="source-line-no">402</span><span id="line-402">                         */</span>
<span class="source-line-no">403</span><span id="line-403">                        if( retValue.isEmpty() )</span>
<span class="source-line-no">404</span><span id="line-404">                        {</span>
<span class="source-line-no">405</span><span id="line-405">                            retValue = Optional.of( address );</span>
<span class="source-line-no">406</span><span id="line-406">                            if( address instanceof Inet4Address ) break AddressLoop;</span>
<span class="source-line-no">407</span><span id="line-407">                        }</span>
<span class="source-line-no">408</span><span id="line-408">                        else if( !(retValue.get() instanceof Inet4Address) )</span>
<span class="source-line-no">409</span><span id="line-409">                        {</span>
<span class="source-line-no">410</span><span id="line-410">                            retValue = Optional.of( address );</span>
<span class="source-line-no">411</span><span id="line-411">                            break AddressLoop;</span>
<span class="source-line-no">412</span><span id="line-412">                        }</span>
<span class="source-line-no">413</span><span id="line-413">                    }</span>
<span class="source-line-no">414</span><span id="line-414">                    else</span>
<span class="source-line-no">415</span><span id="line-415">                    {</span>
<span class="source-line-no">416</span><span id="line-416">                        retValue = Optional.of( address );</span>
<span class="source-line-no">417</span><span id="line-417">                        if( address instanceof Inet4Address ) break AddressLoop;</span>
<span class="source-line-no">418</span><span id="line-418">                    }</span>
<span class="source-line-no">419</span><span id="line-419">                }</span>
<span class="source-line-no">420</span><span id="line-420">            }</span>
<span class="source-line-no">421</span><span id="line-421">        }   //  ScanLoop:</span>
<span class="source-line-no">422</span><span id="line-422"></span>
<span class="source-line-no">423</span><span id="line-423">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">424</span><span id="line-424">        return retValue;</span>
<span class="source-line-no">425</span><span id="line-425">    }   //  determineIPAddress()</span>
<span class="source-line-no">426</span><span id="line-426"></span>
<span class="source-line-no">427</span><span id="line-427">    /**</span>
<span class="source-line-no">428</span><span id="line-428">     *  Determines all the IP addresses of the machine this program is running</span>
<span class="source-line-no">429</span><span id="line-429">     *  on.</span>
<span class="source-line-no">430</span><span id="line-430">     *</span>
<span class="source-line-no">431</span><span id="line-431">     *  @return The IP addresses.</span>
<span class="source-line-no">432</span><span id="line-432">     */</span>
<span class="source-line-no">433</span><span id="line-433">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">434</span><span id="line-434">    public static final InetAddress [] determineIPAddresses()</span>
<span class="source-line-no">435</span><span id="line-435">    {</span>
<span class="source-line-no">436</span><span id="line-436">        final var retValue = getNetworkInterfaces().stream()</span>
<span class="source-line-no">437</span><span id="line-437">            .flatMap( i -&gt; list( i.getInetAddresses() ).stream() )</span>
<span class="source-line-no">438</span><span id="line-438">            .toArray( InetAddress []::new );</span>
<span class="source-line-no">439</span><span id="line-439"></span>
<span class="source-line-no">440</span><span id="line-440">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">441</span><span id="line-441">        return retValue;</span>
<span class="source-line-no">442</span><span id="line-442">    }   //  determineIPAddresses()</span>
<span class="source-line-no">443</span><span id="line-443"></span>
<span class="source-line-no">444</span><span id="line-444">    /**</span>
<span class="source-line-no">445</span><span id="line-445">     *  Determines the operating system.</span>
<span class="source-line-no">446</span><span id="line-446">     *</span>
<span class="source-line-no">447</span><span id="line-447">     *  @return The operating system.</span>
<span class="source-line-no">448</span><span id="line-448">     */</span>
<span class="source-line-no">449</span><span id="line-449">    private static final OperatingSystem determineOperatingSystem()</span>
<span class="source-line-no">450</span><span id="line-450">    {</span>
<span class="source-line-no">451</span><span id="line-451">        /*</span>
<span class="source-line-no">452</span><span id="line-452">         * TODO Add more criteria for each family. And perhaps it should be</span>
<span class="source-line-no">453</span><span id="line-453">         * distinguished between Linux, BSD and Unix (and there between HP-UX</span>
<span class="source-line-no">454</span><span id="line-454">         * and AIX) ...</span>
<span class="source-line-no">455</span><span id="line-455">         */</span>
<span class="source-line-no">456</span><span id="line-456">        var retValue = OperatingSystem.UNKNOWN;</span>
<span class="source-line-no">457</span><span id="line-457"></span>
<span class="source-line-no">458</span><span id="line-458">        /*</span>
<span class="source-line-no">459</span><span id="line-459">         * All currently known MS-DOS and Windows versions and their file</span>
<span class="source-line-no">460</span><span id="line-460">         * systems use the backslash as the separator for folders.</span>
<span class="source-line-no">461</span><span id="line-461">         * They also use the semicolon as the PATH separator.</span>
<span class="source-line-no">462</span><span id="line-462">         */</span>
<span class="source-line-no">463</span><span id="line-463">        final var fileSeparator = File.separatorChar;</span>
<span class="source-line-no">464</span><span id="line-464">        final var pathSeparator = File.pathSeparatorChar;</span>
<span class="source-line-no">465</span><span id="line-465">        if( (fileSeparator == '\\') &amp;&amp; (pathSeparator == ';') )</span>
<span class="source-line-no">466</span><span id="line-466">        {</span>
<span class="source-line-no">467</span><span id="line-467">            retValue = OperatingSystem.WINDOWS;</span>
<span class="source-line-no">468</span><span id="line-468">        }</span>
<span class="source-line-no">469</span><span id="line-469">        else if( (fileSeparator == '/') &amp;&amp; (pathSeparator == ':') )</span>
<span class="source-line-no">470</span><span id="line-470">        {</span>
<span class="source-line-no">471</span><span id="line-471">            if( getProperty( PROPERTY_OSNAME ).toLowerCase( ROOT ).contains( "osx" ) )</span>
<span class="source-line-no">472</span><span id="line-472">            {</span>
<span class="source-line-no">473</span><span id="line-473">                retValue = OperatingSystem.OSX;</span>
<span class="source-line-no">474</span><span id="line-474">            }</span>
<span class="source-line-no">475</span><span id="line-475">            else</span>
<span class="source-line-no">476</span><span id="line-476">            {</span>
<span class="source-line-no">477</span><span id="line-477">                retValue = OperatingSystem.UNIX;</span>
<span class="source-line-no">478</span><span id="line-478">            }</span>
<span class="source-line-no">479</span><span id="line-479">        }</span>
<span class="source-line-no">480</span><span id="line-480"></span>
<span class="source-line-no">481</span><span id="line-481">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">482</span><span id="line-482">        return retValue;</span>
<span class="source-line-no">483</span><span id="line-483">    }   //  determineOperatingSystem()</span>
<span class="source-line-no">484</span><span id="line-484"></span>
<span class="source-line-no">485</span><span id="line-485">    /**</span>
<span class="source-line-no">486</span><span id="line-486">     *  Determines those IP addresses of the machine this program is running</span>
<span class="source-line-no">487</span><span id="line-487">     *  on that are used to communicate with the outside world. This means that</span>
<span class="source-line-no">488</span><span id="line-488">     *  only those &lt;i&gt;active&lt;/i&gt; network interfaces are considered that are</span>
<span class="source-line-no">489</span><span id="line-489">     *  &lt;i&gt;not&lt;/i&gt; a loopback interface.</span>
<span class="source-line-no">490</span><span id="line-490">     *</span>
<span class="source-line-no">491</span><span id="line-491">     *  @return The IP addresses.</span>
<span class="source-line-no">492</span><span id="line-492">     */</span>
<span class="source-line-no">493</span><span id="line-493">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">494</span><span id="line-494">    public static final InetAddress [] determineOutboundIPAddresses()</span>
<span class="source-line-no">495</span><span id="line-495">    {</span>
<span class="source-line-no">496</span><span id="line-496">        final var retValue = getNetworkInterfaces().stream()</span>
<span class="source-line-no">497</span><span id="line-497">            .filter( i -&gt;</span>
<span class="source-line-no">498</span><span id="line-498">            {</span>
<span class="source-line-no">499</span><span id="line-499">                try</span>
<span class="source-line-no">500</span><span id="line-500">                {</span>
<span class="source-line-no">501</span><span id="line-501">                    return i.isUp() &amp;&amp; !i.isLoopback();</span>
<span class="source-line-no">502</span><span id="line-502">                }</span>
<span class="source-line-no">503</span><span id="line-503">                catch( @SuppressWarnings( "unused" ) final SocketException e )</span>
<span class="source-line-no">504</span><span id="line-504">                {</span>
<span class="source-line-no">505</span><span id="line-505">                    return false;</span>
<span class="source-line-no">506</span><span id="line-506">                }</span>
<span class="source-line-no">507</span><span id="line-507">            } )</span>
<span class="source-line-no">508</span><span id="line-508">            .flatMap( i -&gt; list( i.getInetAddresses() ).stream() )</span>
<span class="source-line-no">509</span><span id="line-509">            .toArray( InetAddress []::new );</span>
<span class="source-line-no">510</span><span id="line-510"></span>
<span class="source-line-no">511</span><span id="line-511">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">512</span><span id="line-512">        return retValue;</span>
<span class="source-line-no">513</span><span id="line-513">    }   //  determineOutboundIPAddresses()</span>
<span class="source-line-no">514</span><span id="line-514"></span>
<span class="source-line-no">515</span><span id="line-515">    /**</span>
<span class="source-line-no">516</span><span id="line-516">     *  Determines those IP addresses of the machine this program is running</span>
<span class="source-line-no">517</span><span id="line-517">     *  on that are used to communicate with the outside world. This means that</span>
<span class="source-line-no">518</span><span id="line-518">     *  only those &lt;i&gt;active&lt;/i&gt; network interfaces are considered that are</span>
<span class="source-line-no">519</span><span id="line-519">     *  &lt;i&gt;not&lt;/i&gt; a loopback interface.</span>
<span class="source-line-no">520</span><span id="line-520">     *</span>
<span class="source-line-no">521</span><span id="line-521">     *  @return The IP addresses.</span>
<span class="source-line-no">522</span><span id="line-522">     *</span>
<span class="source-line-no">523</span><span id="line-523">     *  @deprecated Use</span>
<span class="source-line-no">524</span><span id="line-524">     *      {@link #determineOutboundIPAddresses()}</span>
<span class="source-line-no">525</span><span id="line-525">     *      instead.</span>
<span class="source-line-no">526</span><span id="line-526">     */</span>
<span class="source-line-no">527</span><span id="line-527">    @API( status = DEPRECATED )</span>
<span class="source-line-no">528</span><span id="line-528">    @Deprecated( forRemoval = true )</span>
<span class="source-line-no">529</span><span id="line-529">    public static InetAddress [] determineOutsideIPAddresses()</span>
<span class="source-line-no">530</span><span id="line-530">    {</span>
<span class="source-line-no">531</span><span id="line-531">        return determineOutboundIPAddresses();</span>
<span class="source-line-no">532</span><span id="line-532">    }   //  determineOutsideIPAddresses()</span>
<span class="source-line-no">533</span><span id="line-533"></span>
<span class="source-line-no">534</span><span id="line-534">    /**</span>
<span class="source-line-no">535</span><span id="line-535">     *  Formats the given node id as a MAC address string.</span>
<span class="source-line-no">536</span><span id="line-536">     *</span>
<span class="source-line-no">537</span><span id="line-537">     *  @param  nodeId  The node id.</span>
<span class="source-line-no">538</span><span id="line-538">     *  @return The MAC address string.</span>
<span class="source-line-no">539</span><span id="line-539">     */</span>
<span class="source-line-no">540</span><span id="line-540">    @SuppressWarnings( "MagicNumber" )</span>
<span class="source-line-no">541</span><span id="line-541">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">542</span><span id="line-542">    public static final String formatNodeIdAsMAC( final long nodeId )</span>
<span class="source-line-no">543</span><span id="line-543">    {</span>
<span class="source-line-no">544</span><span id="line-544">        if( nodeId != (nodeId &amp; 0x0000FFFFFFFFFFFFL) )</span>
<span class="source-line-no">545</span><span id="line-545">        {</span>
<span class="source-line-no">546</span><span id="line-546">            throw new ValidationException( format( "Node id is invalid: %1$d", nodeId ) );</span>
<span class="source-line-no">547</span><span id="line-547">        }</span>
<span class="source-line-no">548</span><span id="line-548"></span>
<span class="source-line-no">549</span><span id="line-549">        final var hexFormat = HexFormat.of();</span>
<span class="source-line-no">550</span><span id="line-550">        final var s = hexFormat.toHexDigits( nodeId, 12 );</span>
<span class="source-line-no">551</span><span id="line-551">        final var bytes = hexFormat.parseHex( s );</span>
<span class="source-line-no">552</span><span id="line-552">        final var retValue = HexFormat.ofDelimiter( "-" ).withUpperCase().formatHex( bytes );</span>
<span class="source-line-no">553</span><span id="line-553"></span>
<span class="source-line-no">554</span><span id="line-554">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">555</span><span id="line-555">        return retValue.toString();</span>
<span class="source-line-no">556</span><span id="line-556">    }   //  formatNodeIdAsMAC()</span>
<span class="source-line-no">557</span><span id="line-557"></span>
<span class="source-line-no">558</span><span id="line-558">    /**</span>
<span class="source-line-no">559</span><span id="line-559">     *  Returns the MAC address for the current computer. In case the machine</span>
<span class="source-line-no">560</span><span id="line-560">     *  will have more than one network card (NIC), the returned MAC is</span>
<span class="source-line-no">561</span><span id="line-561">     *  selected in the same as for</span>
<span class="source-line-no">562</span><span id="line-562">     *  {@link #getNodeId()}.</span>
<span class="source-line-no">563</span><span id="line-563">     *</span>
<span class="source-line-no">564</span><span id="line-564">     *  @return The MAC address.</span>
<span class="source-line-no">565</span><span id="line-565">     */</span>
<span class="source-line-no">566</span><span id="line-566">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">567</span><span id="line-567">    public static final String getMACAddress() { return formatNodeIdAsMAC( getNodeId() ); }</span>
<span class="source-line-no">568</span><span id="line-568"></span>
<span class="source-line-no">569</span><span id="line-569">    /**</span>
<span class="source-line-no">570</span><span id="line-570">     *  Returns a</span>
<span class="source-line-no">571</span><span id="line-571">     *  {@link Collection}</span>
<span class="source-line-no">572</span><span id="line-572">     *  of all the network interfaces on this machine. Instead of throwing an</span>
<span class="source-line-no">573</span><span id="line-573">     *  exception, the method will return an empty collection in case the</span>
<span class="source-line-no">574</span><span id="line-574">     *  machine do not have network configured. Otherwise, the collection</span>
<span class="source-line-no">575</span><span id="line-575">     *  contains at least one element, possibly representing a loopback</span>
<span class="source-line-no">576</span><span id="line-576">     *  interface that only supports communication between entities on this</span>
<span class="source-line-no">577</span><span id="line-577">     *  machine.</span>
<span class="source-line-no">578</span><span id="line-578">     *</span>
<span class="source-line-no">579</span><span id="line-579">     *  @return The</span>
<span class="source-line-no">580</span><span id="line-580">     *      {@link NetworkInterface}s found on this machine.</span>
<span class="source-line-no">581</span><span id="line-581">     *</span>
<span class="source-line-no">582</span><span id="line-582">     *  @see java.net.NetworkInterface#getNetworkInterfaces()</span>
<span class="source-line-no">583</span><span id="line-583">     */</span>
<span class="source-line-no">584</span><span id="line-584">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">585</span><span id="line-585">    public static final Collection&lt;NetworkInterface&gt; getNetworkInterfaces()</span>
<span class="source-line-no">586</span><span id="line-586">    {</span>
<span class="source-line-no">587</span><span id="line-587">        Collection&lt;NetworkInterface&gt; retValue = List.of();</span>
<span class="source-line-no">588</span><span id="line-588">        try</span>
<span class="source-line-no">589</span><span id="line-589">        {</span>
<span class="source-line-no">590</span><span id="line-590">            retValue = List.copyOf( list( java.net.NetworkInterface.getNetworkInterfaces() ) );</span>
<span class="source-line-no">591</span><span id="line-591">        }</span>
<span class="source-line-no">592</span><span id="line-592">        catch( @SuppressWarnings( "unused" ) final SocketException e )</span>
<span class="source-line-no">593</span><span id="line-593">        {</span>
<span class="source-line-no">594</span><span id="line-594">            /*</span>
<span class="source-line-no">595</span><span id="line-595">             * There are no NICs on this machine, so we return the empty list.</span>
<span class="source-line-no">596</span><span id="line-596">             */</span>
<span class="source-line-no">597</span><span id="line-597">        }</span>
<span class="source-line-no">598</span><span id="line-598"></span>
<span class="source-line-no">599</span><span id="line-599">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">600</span><span id="line-600">        return retValue;</span>
<span class="source-line-no">601</span><span id="line-601">    }   //  getNetworkInterfaces()</span>
<span class="source-line-no">602</span><span id="line-602"></span>
<span class="source-line-no">603</span><span id="line-603">    /**</span>
<span class="source-line-no">604</span><span id="line-604">     *  Returns the unique id of this node.</span>
<span class="source-line-no">605</span><span id="line-605">     *</span>
<span class="source-line-no">606</span><span id="line-606">     *  @return The node id.</span>
<span class="source-line-no">607</span><span id="line-607">     */</span>
<span class="source-line-no">608</span><span id="line-608">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">609</span><span id="line-609">    public static final long getNodeId()</span>
<span class="source-line-no">610</span><span id="line-610">    {</span>
<span class="source-line-no">611</span><span id="line-611">        if( isNull( m_Node ) )</span>
<span class="source-line-no">612</span><span id="line-612">        {</span>
<span class="source-line-no">613</span><span id="line-613">            final var interfaces = getNetworkInterfaces();</span>
<span class="source-line-no">614</span><span id="line-614">            var randomGenerationRequired = interfaces.isEmpty();</span>
<span class="source-line-no">615</span><span id="line-615">            if( !randomGenerationRequired )</span>
<span class="source-line-no">616</span><span id="line-616">            {</span>
<span class="source-line-no">617</span><span id="line-617">                var count = interfaces.size();</span>
<span class="source-line-no">618</span><span id="line-618">                ScanLoop: for( final var nic : interfaces )</span>
<span class="source-line-no">619</span><span id="line-619">                {</span>
<span class="source-line-no">620</span><span id="line-620">                    try</span>
<span class="source-line-no">621</span><span id="line-621">                    {</span>
<span class="source-line-no">622</span><span id="line-622">                        if( (--count &gt; 0) &amp;&amp; (nic.isLoopback() || nic.isVirtual()) )</span>
<span class="source-line-no">623</span><span id="line-623">                        {</span>
<span class="source-line-no">624</span><span id="line-624">                            /*</span>
<span class="source-line-no">625</span><span id="line-625">                             * We prefer a real hardware NIC if we can get one.</span>
<span class="source-line-no">626</span><span id="line-626">                             */</span>
<span class="source-line-no">627</span><span id="line-627">                            continue ScanLoop;</span>
<span class="source-line-no">628</span><span id="line-628">                        }</span>
<span class="source-line-no">629</span><span id="line-629"></span>
<span class="source-line-no">630</span><span id="line-630">                        final var hardwareAddress = nic.getHardwareAddress();</span>
<span class="source-line-no">631</span><span id="line-631">                        if( nonNull( hardwareAddress ) &amp;&amp; (hardwareAddress.length &gt; 0) )</span>
<span class="source-line-no">632</span><span id="line-632">                        {</span>
<span class="source-line-no">633</span><span id="line-633">                            final var i = new BigInteger( hardwareAddress );</span>
<span class="source-line-no">634</span><span id="line-634">                            //noinspection MagicNumber</span>
<span class="source-line-no">635</span><span id="line-635">                            m_Node = Long.valueOf( i.longValue() &amp; 0x0000FFFFFFFFFFFFL );</span>
<span class="source-line-no">636</span><span id="line-636">                            break ScanLoop;</span>
<span class="source-line-no">637</span><span id="line-637">                        }</span>
<span class="source-line-no">638</span><span id="line-638">                    }</span>
<span class="source-line-no">639</span><span id="line-639">                    catch( @SuppressWarnings( "unused" ) final SocketException e )</span>
<span class="source-line-no">640</span><span id="line-640">                    {</span>
<span class="source-line-no">641</span><span id="line-641">                        /*</span>
<span class="source-line-no">642</span><span id="line-642">                         *  If a SocketException is caught here, this indicates</span>
<span class="source-line-no">643</span><span id="line-643">                         *  that we have problems to determine the NICs. In</span>
<span class="source-line-no">644</span><span id="line-644">                         *  this case, we have to create a random node id.</span>
<span class="source-line-no">645</span><span id="line-645">                         */</span>
<span class="source-line-no">646</span><span id="line-646">                        break ScanLoop;</span>
<span class="source-line-no">647</span><span id="line-647">                    }</span>
<span class="source-line-no">648</span><span id="line-648">                }   //  ScanLoop:</span>
<span class="source-line-no">649</span><span id="line-649"></span>
<span class="source-line-no">650</span><span id="line-650">                /*</span>
<span class="source-line-no">651</span><span id="line-651">                 * If we still do not have a valid node id, it seems that none</span>
<span class="source-line-no">652</span><span id="line-652">                 * of the NICs have a hardware address; may be that they are</span>
<span class="source-line-no">653</span><span id="line-653">                 * NICs for a virtual machine or virtual NICs of some kind.</span>
<span class="source-line-no">654</span><span id="line-654">                 * But is it possible to have a NIC without a MAC?</span>
<span class="source-line-no">655</span><span id="line-655">                 */</span>
<span class="source-line-no">656</span><span id="line-656">                randomGenerationRequired = isNull( m_Node );</span>
<span class="source-line-no">657</span><span id="line-657">            }</span>
<span class="source-line-no">658</span><span id="line-658"></span>
<span class="source-line-no">659</span><span id="line-659">            if( randomGenerationRequired )</span>
<span class="source-line-no">660</span><span id="line-660">            {</span>
<span class="source-line-no">661</span><span id="line-661">                //---* We have to create a random location *-------------------</span>
<span class="source-line-no">662</span><span id="line-662">                m_Node = Long.valueOf( createPseudoNodeId() );</span>
<span class="source-line-no">663</span><span id="line-663">            }</span>
<span class="source-line-no">664</span><span id="line-664">        }</span>
<span class="source-line-no">665</span><span id="line-665"></span>
<span class="source-line-no">666</span><span id="line-666">        final var retValue = m_Node.longValue();</span>
<span class="source-line-no">667</span><span id="line-667"></span>
<span class="source-line-no">668</span><span id="line-668">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">669</span><span id="line-669">        return retValue;</span>
<span class="source-line-no">670</span><span id="line-670">    }   //  getNodeId()</span>
<span class="source-line-no">671</span><span id="line-671"></span>
<span class="source-line-no">672</span><span id="line-672">    /**</span>
<span class="source-line-no">673</span><span id="line-673">     *  Returns the current operating system.</span>
<span class="source-line-no">674</span><span id="line-674">     *</span>
<span class="source-line-no">675</span><span id="line-675">     *  @return The operating system.</span>
<span class="source-line-no">676</span><span id="line-676">     */</span>
<span class="source-line-no">677</span><span id="line-677">    @API( status = STABLE, since = "0.0.6" )</span>
<span class="source-line-no">678</span><span id="line-678">    public static final OperatingSystem getOperatingSystem() { return m_OperatingSystem.get(); }</span>
<span class="source-line-no">679</span><span id="line-679"></span>
<span class="source-line-no">680</span><span id="line-680">    /**</span>
<span class="source-line-no">681</span><span id="line-681">     *  Returns the PID, the process id, for the VM this (the current) program</span>
<span class="source-line-no">682</span><span id="line-682">     *  runs in.</span>
<span class="source-line-no">683</span><span id="line-683">     *</span>
<span class="source-line-no">684</span><span id="line-684">     *  @return The PID.</span>
<span class="source-line-no">685</span><span id="line-685">     *  @throws UnsupportedOperationException   The implementation of</span>
<span class="source-line-no">686</span><span id="line-686">     *      {@link ProcessHandle}</span>
<span class="source-line-no">687</span><span id="line-687">     *      that is currently in use does not support the operation</span>
<span class="source-line-no">688</span><span id="line-688">     *      {@link ProcessHandle#pid()}.</span>
<span class="source-line-no">689</span><span id="line-689">     *</span>
<span class="source-line-no">690</span><span id="line-690">     *  @see ProcessHandle#pid()</span>
<span class="source-line-no">691</span><span id="line-691">     */</span>
<span class="source-line-no">692</span><span id="line-692">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">693</span><span id="line-693">    public static final long getPID() throws UnsupportedOperationException</span>
<span class="source-line-no">694</span><span id="line-694">    {</span>
<span class="source-line-no">695</span><span id="line-695">        final var retValue = ProcessHandle.current().pid();</span>
<span class="source-line-no">696</span><span id="line-696"></span>
<span class="source-line-no">697</span><span id="line-697">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">698</span><span id="line-698">        return retValue;</span>
<span class="source-line-no">699</span><span id="line-699">    }   //  getPID()</span>
<span class="source-line-no">700</span><span id="line-700"></span>
<span class="source-line-no">701</span><span id="line-701">    /**</span>
<span class="source-line-no">702</span><span id="line-702">     *  Returns a pseudo node id; this is useful in cases a machine does not</span>
<span class="source-line-no">703</span><span id="line-703">     *  have a network card (NIC) so that a MAC address could not be obtained,</span>
<span class="source-line-no">704</span><span id="line-704">     *  or if the real node id should not be used.</span>
<span class="source-line-no">705</span><span id="line-705">     *</span>
<span class="source-line-no">706</span><span id="line-706">     *  @return The node id.</span>
<span class="source-line-no">707</span><span id="line-707">     *</span>
<span class="source-line-no">708</span><span id="line-708">     *  @deprecated Use</span>
<span class="source-line-no">709</span><span id="line-709">     *      {@link #createPseudoNodeId()}</span>
<span class="source-line-no">710</span><span id="line-710">     *      instead.</span>
<span class="source-line-no">711</span><span id="line-711">     */</span>
<span class="source-line-no">712</span><span id="line-712">    @API( status = DEPRECATED )</span>
<span class="source-line-no">713</span><span id="line-713">    @Deprecated( forRemoval = true )</span>
<span class="source-line-no">714</span><span id="line-714">    public static long getPseudoNodeId() { return createPseudoNodeId(); }</span>
<span class="source-line-no">715</span><span id="line-715"></span>
<span class="source-line-no">716</span><span id="line-716">    /**</span>
<span class="source-line-no">717</span><span id="line-717">     *  Returns the system random number generator.</span>
<span class="source-line-no">718</span><span id="line-718">     *</span>
<span class="source-line-no">719</span><span id="line-719">     *  @return The random number generator.</span>
<span class="source-line-no">720</span><span id="line-720">     */</span>
<span class="source-line-no">721</span><span id="line-721">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">722</span><span id="line-722">    public static final Random getRandom() { return m_Random.get(); }</span>
<span class="source-line-no">723</span><span id="line-723"></span>
<span class="source-line-no">724</span><span id="line-724">    /**</span>
<span class="source-line-no">725</span><span id="line-725">     *  Returns the alias map; if not yet created, the alias map will be</span>
<span class="source-line-no">726</span><span id="line-726">     *  created by a call to</span>
<span class="source-line-no">727</span><span id="line-727">     *  {@link #createZoneIdAliasMap()}</span>
<span class="source-line-no">728</span><span id="line-728">     *  and the result to that call will be cached for future calls.</span>
<span class="source-line-no">729</span><span id="line-729">     *</span>
<span class="source-line-no">730</span><span id="line-730">     *  @return The alias map.</span>
<span class="source-line-no">731</span><span id="line-731">     *</span>
<span class="source-line-no">732</span><span id="line-732">     *  @see #createZoneIdAliasMap()</span>
<span class="source-line-no">733</span><span id="line-733">     *</span>
<span class="source-line-no">734</span><span id="line-734">     *  @since 0.0.6</span>
<span class="source-line-no">735</span><span id="line-735">     */</span>
<span class="source-line-no">736</span><span id="line-736">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">737</span><span id="line-737">    public static final Map&lt;String,String&gt; getZoneIdAliasMap() { return m_ZoneIdAliasMap.get(); }</span>
<span class="source-line-no">738</span><span id="line-738"></span>
<span class="source-line-no">739</span><span id="line-739">    /**</span>
<span class="source-line-no">740</span><span id="line-740">     *  Checks whether the current system has a network interface installed.</span>
<span class="source-line-no">741</span><span id="line-741">     *</span>
<span class="source-line-no">742</span><span id="line-742">     *  @return {@code true} if the current system has a network interface</span>
<span class="source-line-no">743</span><span id="line-743">     *      installed, {@code false} otherwise.</span>
<span class="source-line-no">744</span><span id="line-744">     */</span>
<span class="source-line-no">745</span><span id="line-745">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">746</span><span id="line-746">    public static final boolean hasNetworkInterface()</span>
<span class="source-line-no">747</span><span id="line-747">    {</span>
<span class="source-line-no">748</span><span id="line-748">        final var retValue = !getNetworkInterfaces().isEmpty();</span>
<span class="source-line-no">749</span><span id="line-749"></span>
<span class="source-line-no">750</span><span id="line-750">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">751</span><span id="line-751">        return retValue;</span>
<span class="source-line-no">752</span><span id="line-752">    }   //  hasNetworkInterface()</span>
<span class="source-line-no">753</span><span id="line-753"></span>
<span class="source-line-no">754</span><span id="line-754">    /**</span>
<span class="source-line-no">755</span><span id="line-755">     *  Replaces the variables of the form &lt;code&gt;${&lt;i&gt;&amp;lt;name&amp;gt;&lt;/i&gt;}&lt;/code&gt;</span>
<span class="source-line-no">756</span><span id="line-756">     *  in the given String with values from the</span>
<span class="source-line-no">757</span><span id="line-757">     *  {@linkplain System#getProperties() system properties},</span>
<span class="source-line-no">758</span><span id="line-758">     *  the</span>
<span class="source-line-no">759</span><span id="line-759">     *  {@linkplain System#getenv() system environment}</span>
<span class="source-line-no">760</span><span id="line-760">     *  and the given maps. The method will try the maps in the given</span>
<span class="source-line-no">761</span><span id="line-761">     *  sequence.&lt;br&gt;</span>
<span class="source-line-no">762</span><span id="line-762">     *  &lt;br&gt;In addition, five more variables are recognised:</span>
<span class="source-line-no">763</span><span id="line-763">     *  &lt;dl&gt;</span>
<span class="source-line-no">764</span><span id="line-764">     *  &lt;dt&gt;&lt;b&gt;&lt;code&gt;tq.ip&lt;/code&gt;&lt;/b&gt;&lt;/dt&gt;</span>
<span class="source-line-no">765</span><span id="line-765">     *  &lt;dd&gt;The first IP address for the machine that executes this Java</span>
<span class="source-line-no">766</span><span id="line-766">     *  virtual machine.&lt;/dd&gt;</span>
<span class="source-line-no">767</span><span id="line-767">     *</span>
<span class="source-line-no">768</span><span id="line-768">     *  &lt;dt&gt;&lt;b&gt;&lt;code&gt;tq.mac&lt;/code&gt;&lt;/b&gt;&lt;/dt&gt;</span>
<span class="source-line-no">769</span><span id="line-769">     *  &lt;dd&gt;The MAC address of the first NIC in this machine.&lt;/dd&gt;</span>
<span class="source-line-no">770</span><span id="line-770">     *</span>
<span class="source-line-no">771</span><span id="line-771">     *  &lt;dt&gt;&lt;b&gt;&lt;code&gt;tq.nodeId&lt;/code&gt;&lt;/b&gt;&lt;/dt&gt;</span>
<span class="source-line-no">772</span><span id="line-772">     *  &lt;dd&gt;The node id from the first NIC in this machine.&lt;/dd&gt;</span>
<span class="source-line-no">773</span><span id="line-773">     *</span>
<span class="source-line-no">774</span><span id="line-774">     *  &lt;dt&gt;&lt;b&gt;&lt;code&gt;tq.now&lt;/code&gt;&lt;/b&gt;&lt;/dt&gt;</span>
<span class="source-line-no">775</span><span id="line-775">     *  &lt;dd&gt;The current date and time as returned by</span>
<span class="source-line-no">776</span><span id="line-776">     *  {@link Instant#now}.&lt;/dd&gt;</span>
<span class="source-line-no">777</span><span id="line-777">     *</span>
<span class="source-line-no">778</span><span id="line-778">     *  &lt;dt&gt;&lt;b&gt;&lt;code&gt;tq.pid&lt;/code&gt;&lt;/b&gt;&lt;/dt&gt;</span>
<span class="source-line-no">779</span><span id="line-779">     *  &lt;dd&gt;The process id of this Java virtual machine.&lt;/dd&gt;</span>
<span class="source-line-no">780</span><span id="line-780">     *  &lt;/dl&gt;</span>
<span class="source-line-no">781</span><span id="line-781">     *  &lt;br&gt;If no replacement value could be found, the variable will not be</span>
<span class="source-line-no">782</span><span id="line-782">     *  replaced at all; no exception will be thrown.&lt;br&gt;</span>
<span class="source-line-no">783</span><span id="line-783">     *  &lt;br&gt;If a value from one of the maps contains a variable itself, this</span>
<span class="source-line-no">784</span><span id="line-784">     *  will not be replaced.&lt;br&gt;</span>
<span class="source-line-no">785</span><span id="line-785">     *  &lt;br&gt;The variables names are case-sensitive.</span>
<span class="source-line-no">786</span><span id="line-786">     *</span>
<span class="source-line-no">787</span><span id="line-787">     *  @param  text    The text with the variables; can be {@code null}.</span>
<span class="source-line-no">788</span><span id="line-788">     *  @param  additionalSources The maps with additional replacement values.</span>
<span class="source-line-no">789</span><span id="line-789">     *  @return The new text, or {@code null} if the provided value for</span>
<span class="source-line-no">790</span><span id="line-790">     *      {@code text} was already {@code null}.</span>
<span class="source-line-no">791</span><span id="line-791">     *</span>
<span class="source-line-no">792</span><span id="line-792">     *  @see Template#VARIABLE_PATTERN</span>
<span class="source-line-no">793</span><span id="line-793">     *  @see Template#replaceVariable(CharSequence, Map...)</span>
<span class="source-line-no">794</span><span id="line-794">     *</span>
<span class="source-line-no">795</span><span id="line-795">     *  @deprecated Use</span>
<span class="source-line-no">796</span><span id="line-796">     *      {@link Template#replaceVariableFromSystemData(CharSequence, Map[])}</span>
<span class="source-line-no">797</span><span id="line-797">     *      instead.</span>
<span class="source-line-no">798</span><span id="line-798">     */</span>
<span class="source-line-no">799</span><span id="line-799">    @SafeVarargs</span>
<span class="source-line-no">800</span><span id="line-800">    @Deprecated( since = "0.1.0", forRemoval = true )</span>
<span class="source-line-no">801</span><span id="line-801">    @API( status = DEPRECATED, since = "0.0.5" )</span>
<span class="source-line-no">802</span><span id="line-802">    public static final String replaceSystemVariable( final CharSequence text, final Map&lt;String,? extends Object&gt;... additionalSources )</span>
<span class="source-line-no">803</span><span id="line-803">    {</span>
<span class="source-line-no">804</span><span id="line-804">        return Template.replaceVariableFromSystemData( text, additionalSources );</span>
<span class="source-line-no">805</span><span id="line-805">    }   //  replaceSystemVariable()</span>
<span class="source-line-no">806</span><span id="line-806"></span>
<span class="source-line-no">807</span><span id="line-807">    /**</span>
<span class="source-line-no">808</span><span id="line-808">     *  An implementation of</span>
<span class="source-line-no">809</span><span id="line-809">     *  {@link Thread#sleep}</span>
<span class="source-line-no">810</span><span id="line-810">     *  that does not throw an exception in case it will be interrupted.</span>
<span class="source-line-no">811</span><span id="line-811">     *</span>
<span class="source-line-no">812</span><span id="line-812">     *  @param  millis  The time to sleep in milliseconds.</span>
<span class="source-line-no">813</span><span id="line-813">     *  @return  {@code true} if the sleep was interrupted, {@code false} if it</span>
<span class="source-line-no">814</span><span id="line-814">     *      terminated as planned.</span>
<span class="source-line-no">815</span><span id="line-815">     */</span>
<span class="source-line-no">816</span><span id="line-816">    @SuppressWarnings( "BusyWait" )</span>
<span class="source-line-no">817</span><span id="line-817">    @API( status = STABLE, since = "0.0.7" )</span>
<span class="source-line-no">818</span><span id="line-818">    public static final boolean repose( final long millis )</span>
<span class="source-line-no">819</span><span id="line-819">    {</span>
<span class="source-line-no">820</span><span id="line-820">        var retValue = true;</span>
<span class="source-line-no">821</span><span id="line-821">        final var endTimeMillis  = currentTimeMillis() + millis;</span>
<span class="source-line-no">822</span><span id="line-822">        SleepLoop: while( currentTimeMillis() &lt; endTimeMillis )</span>
<span class="source-line-no">823</span><span id="line-823">        {</span>
<span class="source-line-no">824</span><span id="line-824">            try</span>
<span class="source-line-no">825</span><span id="line-825">            {</span>
<span class="source-line-no">826</span><span id="line-826">                Thread.sleep( max( 0, endTimeMillis - currentTimeMillis() ) );</span>
<span class="source-line-no">827</span><span id="line-827">                retValue = false;</span>
<span class="source-line-no">828</span><span id="line-828">            }</span>
<span class="source-line-no">829</span><span id="line-829">            catch( @SuppressWarnings( "unused" ) final InterruptedException e )</span>
<span class="source-line-no">830</span><span id="line-830">            {</span>
<span class="source-line-no">831</span><span id="line-831">               if( currentThread().isInterrupted() ) break SleepLoop;</span>
<span class="source-line-no">832</span><span id="line-832">            }</span>
<span class="source-line-no">833</span><span id="line-833">        }   //  SleepLoop:</span>
<span class="source-line-no">834</span><span id="line-834"></span>
<span class="source-line-no">835</span><span id="line-835">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">836</span><span id="line-836">        return retValue;</span>
<span class="source-line-no">837</span><span id="line-837">    }   //  repose()</span>
<span class="source-line-no">838</span><span id="line-838"></span>
<span class="source-line-no">839</span><span id="line-839">    /**</span>
<span class="source-line-no">840</span><span id="line-840">     *  An implementation of</span>
<span class="source-line-no">841</span><span id="line-841">     *  {@link #repose(long)}</span>
<span class="source-line-no">842</span><span id="line-842">     *  that takes an instance of</span>
<span class="source-line-no">843</span><span id="line-843">     *  {@link Duration}</span>
<span class="source-line-no">844</span><span id="line-844">     *  to determine the time to sleep.</span>
<span class="source-line-no">845</span><span id="line-845">     *</span>
<span class="source-line-no">846</span><span id="line-846">     *  @param  duration    The time to sleep.</span>
<span class="source-line-no">847</span><span id="line-847">     *  @return  {@code true} if the sleep was interrupted, {@code false} if it</span>
<span class="source-line-no">848</span><span id="line-848">     *      terminated as planned.</span>
<span class="source-line-no">849</span><span id="line-849">     */</span>
<span class="source-line-no">850</span><span id="line-850">    @API( status = STABLE, since = "0.0.7" )</span>
<span class="source-line-no">851</span><span id="line-851">    public static final boolean repose( final Duration duration )</span>
<span class="source-line-no">852</span><span id="line-852">    {</span>
<span class="source-line-no">853</span><span id="line-853">        final var milliseconds = requireNonNullArgument( duration, "duration" ).toMillis();</span>
<span class="source-line-no">854</span><span id="line-854">        final var retValue = repose( milliseconds );</span>
<span class="source-line-no">855</span><span id="line-855"></span>
<span class="source-line-no">856</span><span id="line-856">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">857</span><span id="line-857">        return retValue;</span>
<span class="source-line-no">858</span><span id="line-858">    }   //  repose()</span>
<span class="source-line-no">859</span><span id="line-859"></span>
<span class="source-line-no">860</span><span id="line-860">    /**</span>
<span class="source-line-no">861</span><span id="line-861">     *  An implementation of</span>
<span class="source-line-no">862</span><span id="line-862">     *  {@link #sleepUntil(Instant)}</span>
<span class="source-line-no">863</span><span id="line-863">     *  that does not throw an exception when interrupted.</span>
<span class="source-line-no">864</span><span id="line-864">     *</span>
<span class="source-line-no">865</span><span id="line-865">     *  @param  until   The end time for the sleep period.</span>
<span class="source-line-no">866</span><span id="line-866">     *  @return  {@code true} if the sleep was interrupted, {@code false} if it</span>
<span class="source-line-no">867</span><span id="line-867">     *      terminated as planned.</span>
<span class="source-line-no">868</span><span id="line-868">     */</span>
<span class="source-line-no">869</span><span id="line-869">    @API( status = STABLE, since = "0.0.7" )</span>
<span class="source-line-no">870</span><span id="line-870">    public static final boolean reposeUntil( final Instant until )</span>
<span class="source-line-no">871</span><span id="line-871">    {</span>
<span class="source-line-no">872</span><span id="line-872">        var retValue = true;</span>
<span class="source-line-no">873</span><span id="line-873">        SleepLoop: while( Instant.now().isBefore( requireNonNullArgument( until, "until" ) ) )</span>
<span class="source-line-no">874</span><span id="line-874">        {</span>
<span class="source-line-no">875</span><span id="line-875">            try</span>
<span class="source-line-no">876</span><span id="line-876">            {</span>
<span class="source-line-no">877</span><span id="line-877">                sleep( Duration.between( Instant.now(), until ) );</span>
<span class="source-line-no">878</span><span id="line-878">                retValue = false;</span>
<span class="source-line-no">879</span><span id="line-879">            }</span>
<span class="source-line-no">880</span><span id="line-880">            catch( @SuppressWarnings( "unused" ) final InterruptedException e )</span>
<span class="source-line-no">881</span><span id="line-881">            {</span>
<span class="source-line-no">882</span><span id="line-882">                if( currentThread().isInterrupted() ) break SleepLoop;</span>
<span class="source-line-no">883</span><span id="line-883">            }</span>
<span class="source-line-no">884</span><span id="line-884">        }</span>
<span class="source-line-no">885</span><span id="line-885"></span>
<span class="source-line-no">886</span><span id="line-886">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">887</span><span id="line-887">        return retValue;</span>
<span class="source-line-no">888</span><span id="line-888">    }   //  reposeUntil()</span>
<span class="source-line-no">889</span><span id="line-889">    /**</span>
<span class="source-line-no">890</span><span id="line-890">     *  Retrieves an instance of</span>
<span class="source-line-no">891</span><span id="line-891">     *  {@link Locale}</span>
<span class="source-line-no">892</span><span id="line-892">     *  for the given locale name. This method will lookup the requested locale</span>
<span class="source-line-no">893</span><span id="line-893">     *  first in the locales returned by</span>
<span class="source-line-no">894</span><span id="line-894">     *  {@link Locale#getAvailableLocales()}</span>
<span class="source-line-no">895</span><span id="line-895">     *  before it will create a new instance of {@code Locale} using</span>
<span class="source-line-no">896</span><span id="line-896">     *  {@link java.util.Locale.Builder Locale.Builder}.&lt;br&gt;</span>
<span class="source-line-no">897</span><span id="line-897">     *  &lt;br&gt;The method will return</span>
<span class="source-line-no">898</span><span id="line-898">     *  {@link Optional#empty()}</span>
<span class="source-line-no">899</span><span id="line-899">     *  when the format of the given {@code localeName} is invalid.&lt;br&gt;</span>
<span class="source-line-no">900</span><span id="line-900">     *  &lt;br&gt;If none of the already existing instances of {@code Locale} matches</span>
<span class="source-line-no">901</span><span id="line-901">     *  the given name, the language part, the country part, the variant part</span>
<span class="source-line-no">902</span><span id="line-902">     *  and the script part (if provided) are used to create a new instance. If</span>
<span class="source-line-no">903</span><span id="line-903">     *  extensions are given, they will be ignored.&lt;br&gt;</span>
<span class="source-line-no">904</span><span id="line-904">     *  &lt;br&gt;If the given locale name is empty or contains only whitespace, the</span>
<span class="source-line-no">905</span><span id="line-905">     *  method will return</span>
<span class="source-line-no">906</span><span id="line-906">     *  {@link Locale#ROOT}.</span>
<span class="source-line-no">907</span><span id="line-907">     *</span>
<span class="source-line-no">908</span><span id="line-908">     *  @param  localeName  The name of the locale.</span>
<span class="source-line-no">909</span><span id="line-909">     *  @return An instance of</span>
<span class="source-line-no">910</span><span id="line-910">     *      {@link Optional}</span>
<span class="source-line-no">911</span><span id="line-911">     *      that holds the instance of {@code Locale} for the given name.</span>
<span class="source-line-no">912</span><span id="line-912">     */</span>
<span class="source-line-no">913</span><span id="line-913">    @SuppressWarnings( "AssignmentToNull" )</span>
<span class="source-line-no">914</span><span id="line-914">    @API( status = STABLE, since = "0.0.6" )</span>
<span class="source-line-no">915</span><span id="line-915">    public static final Optional&lt;Locale&gt; retrieveLocale( final CharSequence localeName )</span>
<span class="source-line-no">916</span><span id="line-916">    {</span>
<span class="source-line-no">917</span><span id="line-917">        final var name = requireNonNullArgument( localeName, "localeName" ).toString();</span>
<span class="source-line-no">918</span><span id="line-918">        final var locale = name.isBlank()</span>
<span class="source-line-no">919</span><span id="line-919">            ? ROOT</span>
<span class="source-line-no">920</span><span id="line-920">            : stream( Locale.getAvailableLocales() )</span>
<span class="source-line-no">921</span><span id="line-921">                  .filter( l -&gt; l.toString().equals( name ) )</span>
<span class="source-line-no">922</span><span id="line-922">                  .findFirst()</span>
<span class="source-line-no">923</span><span id="line-923">                  .orElseGet( () -&gt;</span>
<span class="source-line-no">924</span><span id="line-924">                  {</span>
<span class="source-line-no">925</span><span id="line-925">                      Locale result = null;</span>
<span class="source-line-no">926</span><span id="line-926">                      final var parts = splitString( name, '_' );</span>
<span class="source-line-no">927</span><span id="line-927">                      try</span>
<span class="source-line-no">928</span><span id="line-928">                      {</span>
<span class="source-line-no">929</span><span id="line-929">                          final var builder = new Locale.Builder();</span>
<span class="source-line-no">930</span><span id="line-930">                          ComposeSwitch: result = switch( parts.length )</span>
<span class="source-line-no">931</span><span id="line-931">                          {</span>
<span class="source-line-no">932</span><span id="line-932">                              case 1 -&gt; builder.setLanguage( parts[0] ).build();</span>
<span class="source-line-no">933</span><span id="line-933">                              case 2 -&gt; builder.setLanguage( parts[0] ).setRegion( parts[1] ).build();</span>
<span class="source-line-no">934</span><span id="line-934">                              case 3 -&gt; {</span>
<span class="source-line-no">935</span><span id="line-935">                                  builder.setLanguage( parts[0] ).setRegion( parts[1] );</span>
<span class="source-line-no">936</span><span id="line-936">                                  if( parts[2].startsWith( "#" ) )</span>
<span class="source-line-no">937</span><span id="line-937">                                  {</span>
<span class="source-line-no">938</span><span id="line-938">                                      if( parts[2].length() == 4 )</span>
<span class="source-line-no">939</span><span id="line-939">                                          builder.setScript( parts[2].substring( 1 ) );</span>
<span class="source-line-no">940</span><span id="line-940">                                  }</span>
<span class="source-line-no">941</span><span id="line-941">                                  else</span>
<span class="source-line-no">942</span><span id="line-942">                                  {</span>
<span class="source-line-no">943</span><span id="line-943">                                      builder.setVariant( parts[2] );</span>
<span class="source-line-no">944</span><span id="line-944">                                  }</span>
<span class="source-line-no">945</span><span id="line-945">                                  yield builder.build();</span>
<span class="source-line-no">946</span><span id="line-946">                              }</span>
<span class="source-line-no">947</span><span id="line-947">                              case 4 -&gt; {</span>
<span class="source-line-no">948</span><span id="line-948">                                  builder.setLanguage( parts[0] ).setRegion( parts[1] );</span>
<span class="source-line-no">949</span><span id="line-949">                                  if( parts[2].startsWith( "#" ) )</span>
<span class="source-line-no">950</span><span id="line-950">                                  {</span>
<span class="source-line-no">951</span><span id="line-951">                                      builder.setScript( parts[2].substring( 1 ) );</span>
<span class="source-line-no">952</span><span id="line-952">                                  }</span>
<span class="source-line-no">953</span><span id="line-953">                                  else</span>
<span class="source-line-no">954</span><span id="line-954">                                  {</span>
<span class="source-line-no">955</span><span id="line-955">                                      builder.setVariant( parts[2] );</span>
<span class="source-line-no">956</span><span id="line-956">                                      if( parts[3].startsWith( "#" ) )</span>
<span class="source-line-no">957</span><span id="line-957">                                      {</span>
<span class="source-line-no">958</span><span id="line-958">                                          if( parts[3].length() == 4 )</span>
<span class="source-line-no">959</span><span id="line-959">                                              builder.setScript( parts[3].substring( 1 ) );</span>
<span class="source-line-no">960</span><span id="line-960">                                      }</span>
<span class="source-line-no">961</span><span id="line-961">                                  }</span>
<span class="source-line-no">962</span><span id="line-962">                                  yield builder.build();</span>
<span class="source-line-no">963</span><span id="line-963">                              }</span>
<span class="source-line-no">964</span><span id="line-964">                              case 5 -&gt; builder.setLanguage( parts[0] ).setRegion( parts[1] ).setVariant( parts[2] ).setScript( parts[3].substring( 1 ) ).build();</span>
<span class="source-line-no">965</span><span id="line-965">                              default -&gt; null; // Invalid input ...</span>
<span class="source-line-no">966</span><span id="line-966">                          };    //  ComposeSwitch:</span>
<span class="source-line-no">967</span><span id="line-967">                      }</span>
<span class="source-line-no">968</span><span id="line-968">                      catch( @SuppressWarnings( "unused" ) final IllformedLocaleException e )</span>
<span class="source-line-no">969</span><span id="line-969">                      {</span>
<span class="source-line-no">970</span><span id="line-970">                          result = null;</span>
<span class="source-line-no">971</span><span id="line-971">                      }</span>
<span class="source-line-no">972</span><span id="line-972">                      return result;</span>
<span class="source-line-no">973</span><span id="line-973">                  } );</span>
<span class="source-line-no">974</span><span id="line-974"></span>
<span class="source-line-no">975</span><span id="line-975">        final var retValue = Optional.ofNullable( locale );</span>
<span class="source-line-no">976</span><span id="line-976"></span>
<span class="source-line-no">977</span><span id="line-977">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">978</span><span id="line-978">        return retValue;</span>
<span class="source-line-no">979</span><span id="line-979">    }   //  retrieveLocale()</span>
<span class="source-line-no">980</span><span id="line-980"></span>
<span class="source-line-no">981</span><span id="line-981">    /**</span>
<span class="source-line-no">982</span><span id="line-982">     *  An implementation of</span>
<span class="source-line-no">983</span><span id="line-983">     *  {@link Thread#sleep}</span>
<span class="source-line-no">984</span><span id="line-984">     *  that takes an instance of</span>
<span class="source-line-no">985</span><span id="line-985">     *  {@link Duration}</span>
<span class="source-line-no">986</span><span id="line-986">     *  to determine the time to sleep.</span>
<span class="source-line-no">987</span><span id="line-987">     *</span>
<span class="source-line-no">988</span><span id="line-988">     *  @param  duration    The time to sleep.</span>
<span class="source-line-no">989</span><span id="line-989">     *  @throws InterruptedException    Another thread has interrupted the</span>
<span class="source-line-no">990</span><span id="line-990">     *      current thread (that one executing {@code sleep()}. The</span>
<span class="source-line-no">991</span><span id="line-991">     *      &lt;i&gt;interrupted status&lt;/i&gt; of the current thread is cleared when</span>
<span class="source-line-no">992</span><span id="line-992">     *      this exception is thrown.</span>
<span class="source-line-no">993</span><span id="line-993">     */</span>
<span class="source-line-no">994</span><span id="line-994">    @API( status = STABLE, since = "0.0.7" )</span>
<span class="source-line-no">995</span><span id="line-995">    public static final void sleep( final Duration duration ) throws InterruptedException</span>
<span class="source-line-no">996</span><span id="line-996">    {</span>
<span class="source-line-no">997</span><span id="line-997">        final var milliseconds = requireNonNullArgument( duration, "duration" ).toMillis();</span>
<span class="source-line-no">998</span><span id="line-998">        Thread.sleep( milliseconds );</span>
<span class="source-line-no">999</span><span id="line-999">    }   //  sleep()</span>
<span class="source-line-no">1000</span><span id="line-1000"></span>
<span class="source-line-no">1001</span><span id="line-1001">    /**</span>
<span class="source-line-no">1002</span><span id="line-1002">     *  Causes the currently executing thread to sleep (temporarily cease</span>
<span class="source-line-no">1003</span><span id="line-1003">     *  execution) until the specified time, subject to the precision and</span>
<span class="source-line-no">1004</span><span id="line-1004">     *  accuracy of system timers and schedulers. The thread does not lose</span>
<span class="source-line-no">1005</span><span id="line-1005">     *  ownership of any monitors.</span>
<span class="source-line-no">1006</span><span id="line-1006">     *</span>
<span class="source-line-no">1007</span><span id="line-1007">     *  @param  until   The end time for the sleep.</span>
<span class="source-line-no">1008</span><span id="line-1008">     *  @throws InterruptedException    Another thread has interrupted the</span>
<span class="source-line-no">1009</span><span id="line-1009">     *      current thread (that one executing {@code sleep()}. The</span>
<span class="source-line-no">1010</span><span id="line-1010">     *      &lt;i&gt;interrupted status&lt;/i&gt; of the current thread is cleared when</span>
<span class="source-line-no">1011</span><span id="line-1011">     *      this exception is thrown.</span>
<span class="source-line-no">1012</span><span id="line-1012">     *</span>
<span class="source-line-no">1013</span><span id="line-1013">     *  @see Thread#sleep(long)</span>
<span class="source-line-no">1014</span><span id="line-1014">     *</span>
<span class="source-line-no">1015</span><span id="line-1015">     *  @since 0.0.7</span>
<span class="source-line-no">1016</span><span id="line-1016">     */</span>
<span class="source-line-no">1017</span><span id="line-1017">    @API( status = STABLE, since = "0.0.7" )</span>
<span class="source-line-no">1018</span><span id="line-1018">    public static final void sleepUntil( final Instant until ) throws InterruptedException</span>
<span class="source-line-no">1019</span><span id="line-1019">    {</span>
<span class="source-line-no">1020</span><span id="line-1020">        final var milliseconds = max( 0, requireNonNullArgument( until, "until" ).toEpochMilli() - currentTimeMillis() );</span>
<span class="source-line-no">1021</span><span id="line-1021">        Thread.sleep( milliseconds );</span>
<span class="source-line-no">1022</span><span id="line-1022">    }   //  sleepUntil()</span>
<span class="source-line-no">1023</span><span id="line-1023"></span>
<span class="source-line-no">1024</span><span id="line-1024">    /**</span>
<span class="source-line-no">1025</span><span id="line-1025">     *  &lt;p&gt;{@summary Returns the</span>
<span class="source-line-no">1026</span><span id="line-1026">     *  {@linkplain System#getProperties() system properties}}</span>
<span class="source-line-no">1027</span><span id="line-1027">     *  as a</span>
<span class="source-line-no">1028</span><span id="line-1028">     *  {@link Map Map&amp;lt;String,String&amp;gt;}.&lt;/p&gt;</span>
<span class="source-line-no">1029</span><span id="line-1029">     *  &lt;p&gt;{@link System#getProperties()}</span>
<span class="source-line-no">1030</span><span id="line-1030">     *  returns an instance of</span>
<span class="source-line-no">1031</span><span id="line-1031">     *  {@link java.util.Properties}, and that is implementing</span>
<span class="source-line-no">1032</span><span id="line-1032">     *  {@code Map&lt;String,Object&gt;}. Although it is unlikely that a value is</span>
<span class="source-line-no">1033</span><span id="line-1033">     *  &lt;i&gt;not&lt;/i&gt; a String (if not impossible &amp;hellip;), this method allows</span>
<span class="source-line-no">1034</span><span id="line-1034">     *  to enforce it.&lt;/p&gt;</span>
<span class="source-line-no">1035</span><span id="line-1035">     *</span>
<span class="source-line-no">1036</span><span id="line-1036">     *  @note   A mere cast to {@code Map&lt;String,String&gt;} does not work</span>
<span class="source-line-no">1037</span><span id="line-1037">     *      &amp;hellip;</span>
<span class="source-line-no">1038</span><span id="line-1038">     *</span>
<span class="source-line-no">1039</span><span id="line-1039">     *  @return A unmodifiable map with the system properties as Strings.</span>
<span class="source-line-no">1040</span><span id="line-1040">     */</span>
<span class="source-line-no">1041</span><span id="line-1041">    public static final Map&lt;String,String&gt; systemPropertiesAsStringMap()</span>
<span class="source-line-no">1042</span><span id="line-1042">    {</span>
<span class="source-line-no">1043</span><span id="line-1043">        final Map&lt;String,String&gt; map = new HashMap&lt;&gt;();</span>
<span class="source-line-no">1044</span><span id="line-1044">        final var properties = getProperties();</span>
<span class="source-line-no">1045</span><span id="line-1045">        for( final var key : properties.stringPropertyNames() )</span>
<span class="source-line-no">1046</span><span id="line-1046">        {</span>
<span class="source-line-no">1047</span><span id="line-1047">            map.put( key, properties.getProperty( key ) );</span>
<span class="source-line-no">1048</span><span id="line-1048">        }</span>
<span class="source-line-no">1049</span><span id="line-1049">        final var retValue = Map.copyOf( map );</span>
<span class="source-line-no">1050</span><span id="line-1050"></span>
<span class="source-line-no">1051</span><span id="line-1051">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">1052</span><span id="line-1052">        return retValue;</span>
<span class="source-line-no">1053</span><span id="line-1053">    }   //  systemPropertiesAsStringMap()</span>
<span class="source-line-no">1054</span><span id="line-1054"></span>
<span class="source-line-no">1055</span><span id="line-1055">    /**</span>
<span class="source-line-no">1056</span><span id="line-1056">     *  &lt;p&gt;{@summary Translates a given MAC address into a numerical node</span>
<span class="source-line-no">1057</span><span id="line-1057">     *  id.}&lt;/p&gt;</span>
<span class="source-line-no">1058</span><span id="line-1058">     *  &lt;p&gt;A MAC address is a string consisting of 12 hex digits, grouped by</span>
<span class="source-line-no">1059</span><span id="line-1059">     *  two, each group separated by a hyphen:</span>
<span class="source-line-no">1060</span><span id="line-1060">     *  &lt;code&gt;&lt;i&gt;xx&lt;/i&gt;-&lt;i&gt;xx&lt;/i&gt;-&lt;i&gt;xx&lt;/i&gt;-&lt;i&gt;xx&lt;/i&gt;-&lt;i&gt;xx&lt;/i&gt;-&lt;i&gt;xx&lt;/i&gt;&lt;/code&gt;&lt;/p&gt;</span>
<span class="source-line-no">1061</span><span id="line-1061">     *</span>
<span class="source-line-no">1062</span><span id="line-1062">     *  @param  macAddress  The MAC address to translate.</span>
<span class="source-line-no">1063</span><span id="line-1063">     *  @return The node id.</span>
<span class="source-line-no">1064</span><span id="line-1064">     */</span>
<span class="source-line-no">1065</span><span id="line-1065">    @API( status = STABLE, since = "0.0.5" )</span>
<span class="source-line-no">1066</span><span id="line-1066">    public static final long translateMACToNodeId( final String macAddress )</span>
<span class="source-line-no">1067</span><span id="line-1067">    {</span>
<span class="source-line-no">1068</span><span id="line-1068">        final var bytes = HexFormat.ofDelimiter( "-" ).withUpperCase().parseHex( requireNotEmptyArgument( macAddress, "macAddress" ) );</span>
<span class="source-line-no">1069</span><span id="line-1069">        final var MSG_InvalidMAC = "MAC address is invalid: %1$s";</span>
<span class="source-line-no">1070</span><span id="line-1070">        if( bytes.length != 6 )</span>
<span class="source-line-no">1071</span><span id="line-1071">        {</span>
<span class="source-line-no">1072</span><span id="line-1072">            throw new ValidationException( format( MSG_InvalidMAC, macAddress ) );</span>
<span class="source-line-no">1073</span><span id="line-1073">        }</span>
<span class="source-line-no">1074</span><span id="line-1074">        final byte [] bytes2 = new byte [7];</span>
<span class="source-line-no">1075</span><span id="line-1075">        arraycopy( bytes, 0, bytes2, 1, 6 );</span>
<span class="source-line-no">1076</span><span id="line-1076">        final var retValue = new BigInteger( bytes2 ).longValue();</span>
<span class="source-line-no">1077</span><span id="line-1077"></span>
<span class="source-line-no">1078</span><span id="line-1078">        //---* Done *----------------------------------------------------------</span>
<span class="source-line-no">1079</span><span id="line-1079">        return retValue;</span>
<span class="source-line-no">1080</span><span id="line-1080">    }   //  translateMACToNodeId()</span>
<span class="source-line-no">1081</span><span id="line-1081">}</span>
<span class="source-line-no">1082</span><span id="line-1082">//  class SystemUtils</span>
<span class="source-line-no">1083</span><span id="line-1083"></span>
<span class="source-line-no">1084</span><span id="line-1084">/*</span>
<span class="source-line-no">1085</span><span id="line-1085"> *  End of File</span>
<span class="source-line-no">1086</span><span id="line-1086"> */</span>




























































</pre>
</div>
</main>
</body>
</html>
